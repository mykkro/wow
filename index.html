<!DOCTYPE html>
<html>
<head>
  <link href="css/normalize.css" media="all" rel="stylesheet" type="text/css" />
  <link href="css/style.css" media="all" rel="stylesheet" type="text/css" />

  <link rel="stylesheet/less" href="css/style.less" type="text/css" /> 

  <link href="fonts/SourceSansPro/fontface.css" media="all" rel="stylesheet" type="text/css" />
  <link href="fonts/Meteocons/stylesheet.css" media="all" rel="stylesheet" type="text/css" />
  <!-- third party libraries should be loaded here and then passed to the Widgetizer module... -->
  <script type="text/javascript" src="js/less/less-1.6.1.min.js"></script>
  <script type="text/javascript" src="js/jquery/jquery-2.0.3.min.js"></script>
  <script type="text/javascript" src="js/jquery.history/jquery.history.min.js"></script>
  <script type="text/javascript" src="js/jquery.svg/jquery.svg.min.js"></script>
  <script type="text/javascript" src="js/jquery.svg/jquery.svgdom.min.js"></script>
  <script type="text/javascript" src="js/svgjs/svg.min.js"></script>
  <script type="text/javascript" src="js/svgjs/svg.easing.min.js"></script>
  <script type="text/javascript" src="js/svgjs/svg.filter.js"></script>
  <script>
  var DEBUG = true
  
  // access main module...
  //process.mainModule.exports.hello()


    // >>> SERVER CODE
    /*
    var i18n = new (require('i18n-2'))({
        locales: ['en', 'de', 'cz'],
        defaultLocale: 'en'
    });

    i18n.setLocale('de')
    */
    // <<< SERVER CODE

    // >>> SERVER CODE
    // TODO gui and i18n module need client stub
    var gui = require('nw.gui');
    window.gui = gui 
    // TODO do login only from login page (login as user/login as admin)
    var Auth = require("./lib/auth")(window)
    Auth.login("mykkro", "pass", function(err, user) {
      if(err) console.error(err)
      if(user) console.log(user)
    })
    // <<< SERVER CODE

  $(document).ready(function() {
  


    /* client version of i18n */
    var i18n = new(require("./js/i18n"))({
        locales: ['en', 'de', 'cz'],
        defaultLocale: 'en'
    })
    i18n.setLocale('de')

    /* raw URL data */
    var pageInfo = require("./js/pageinfo")(window)

    /* Custom page data - eg. loaded from database */
    var pageData = {
    }

    var PageLoader = require("./js/pageloader")(window, $, SVG, i18n)

    /* Do it! */
    PageLoader.loadPage(pageInfo, pageData, function(ctrl) {
      console.log("Page loaded successfully!")
      console.log(pageData)      
    })
    
          
  })
  </script>
</head>
<body>
<div id="top-wrapper"></div>
<div id="iframe-wrapper"></div>
</body>
</html>
