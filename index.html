<!DOCTYPE html>
<html>
  <head>
    <title>Window title goes here</title>
 <link href="css/style.css" media="all" rel="stylesheet" type="text/css" />
   </head>
  <body>

        <button id="open"><img src="img/16x16/file.png"/>Open</button>
		<input style="display:none;" id="openFile" type="file" />


<div><textarea id="textinput"></textarea></div>
<button id="run">Run</button>
<pre id="output"></pre>

  	<script src="js/jquery/jquery-2.0.3.min.js"></script>
  	<script src="js/d3/d3.v3.min.js"></script>
  	<script src="index.js"></script>

  	<script>
$("#run").click(function() {
  var src = $("#textinput").val()
  try {
  var out = eval(src)
  $("#output").prepend($("<p>").addClass("source").text(src), $("<p>").addClass("result").text(out))
  $("#textinput").val("")
}
catch(e) {
  $("#output").prepend($("<p>").addClass("source").text(src), $("<p>").addClass("error").text(e))
}
})


var gui = require("nw.gui");
var fs = require("fs");

var Thumbbot = require('thumbbot')



function handleOpenButton() {
    $("#openFile").trigger("click")
}

var onChosenFileToOpen = function(theFileEntry) {
  //setFile(theFileEntry, false);
  readFileIntoEditor(theFileEntry);
};

function readFileIntoEditor(theFileEntry) {
  fs.readFile(theFileEntry, function (err, data) {
    if (err) {
      console.log("Read failed: " + err);
    }
    //editor.setValue(String(data));
    console.log(theFileEntry)
    //console.log(String(data))

	fs.writeFile("userdata/pokus.ogg", data, function (err) {
    	if (err) {
      	console.log("Write failed: " + err);
      	return;
    	}

    	console.log("Write completed.");
      var bot = new Thumbbot('userdata/pokus.ogg', 'userdata/thumb.jpg')
      bot.set({width: 300, height: 400, method:'resize'})
      bot.snap(function(err) {
        if (err) {
          console.log("Resize failed: " + err);
          return;
        }
console.log("Resize completed.");

var Magician = require('magician');
var img = new Magician('userdata/thumb.jpg')
img.getDimensions(function(err, data) {
  console.log(data);
})
      })

  	});

  });
}

$("#open").on("click", handleOpenButton);

$("#openFile").change(function(evt) {
	onChosenFileToOpen($(this).val());
});


var googleImages = require('google-images');
googleImages.search("liquido", function(err, images) {
  console.log(images)
})


  	</script>
  </body>
</html>