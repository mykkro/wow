<!DOCTYPE html>
<html>
<head>
  <link href="fonts/SourceSanspro/fontface.css" media="all" rel="stylesheet" type="text/css" />
  <!-- third party libraries should be loaded here and then passed to the Widgetizer module... -->
  <script type="text/javascript" src="js/jquery/jquery-2.0.3.min.js"></script>
  <script type="text/javascript" src="js/svgjs/svg.min.js"></script>
  <script type="text/javascript" src="js/svgjs/svg.easing.min.js"></script>
  <script type="text/javascript" src="js/svgjs/svg.filter.js"></script>
	<script>

	$(document).ready(function() {
		var Widgetizer = require("./js/widgetizer")(window, $)
		//var $ = Widgetizer.$
		var _ = Widgetizer._

		/* load widgets... */
		require("./js/widgets/piechart/piechart")(Widgetizer)
		require("./js/widgets/box/box")(Widgetizer)
		require("./js/widgets/grid/grid")(Widgetizer)
		require("./js/widgets/flow/flow")(Widgetizer)
		require("./js/widgets/textbox/textbox")(Widgetizer)
		require("./js/widgets/text/text")(Widgetizer)
		require("./js/widgets/viewport/viewport")(Widgetizer)
		require("./js/widgets/image/image")(Widgetizer)

		/* widgetize the entire page */
		Widgetizer.widgetize()
		
		// search for widgetized elements: $("[data-wow]")

		// this now works (using npm-bundled jquery resulted in 'No Transport' error
		$.getJSON("./test/ajax/data.json").done(function(data) {
			console.log("Data received!")
			console.log(JSON.stringify(data))
		}).fail(function(err) {
			console.error("Error receiving data")
			console.log(JSON.stringify(err))
		})
		
    var draw = SVG('svg1')

    // create image
    var image = draw.image('icons/SVG/air.svg')		
    $("#btn1").click(function() {
      var anim = image.animate(1000, SVG.easing.bounce).move(100, 100)
    })
	
	 // create text
        var text = draw.text("Multiline\ntext").move(500, 0)
        text.font({
          family: 'Source Sans Pro'
		, weight: 300
        , size: 30
		, style: 'italic'
        , anchor: 'middle'
        , leading: '1em'
        })
	
	
	})
	</script>
	<style type="text/css">
	html, svg {
		-webkit-font-smoothing: antialiased;
	}
	</style>
</head>
<body>

<h1>My first SVG</h1>
<div style="width:800px;height:200px;">
<svg version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:wow="http://example.org/wow"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    unselectable="on" 
    style="-webkit-user-select: none;"
    id="svg1"
    width="800"
    height="200"
    >
  <defs>
    <filter id="dropShadow1">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
      <feOffset dx="2" dy="4" />
      <feMerge>
          <feMergeNode />
          <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
    <filter id="dropShadow2">
      <feComponentTransfer result="offOut" in="SourceAlpha">
          <feFuncA type="linear" />
          <feFuncR type="discrete" tablevalues="0.5" />
          <feFuncG type="discrete" tablevalues="1"/>
          <feFuncB type="discrete" />
      </feComponentTransfer>
      <feOffset result="shadow" dx="2" dy="4" in="offOut" />
      <feGaussianBlur stdDeviation="2" result="blurOut" in="shadow" />
      <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
    </filter>
    <filter id="dropShadow3">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
      <feOffset dx="5" dy="5" result="offsetblur"/>
      <feFlood flood-color="gray"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="sepia">
        <feColorMatrix type="matrix" values=".343 .669 .119 0 0 .249 .626 .130
            0 0 .172 .334 .111 0 0 .000 .000 .000 1 0" />
    </filter>
    <filter id="edge">
        <feColorMatrix type="luminanceToAlpha" />
        <feConvolveMatrix order="3" kernelMatrix="-1 -2 -1 0 0 0 1 2 1" />
        <feConvolveMatrix order="3" kernelMatrix="-1 -2 -1 0 0 0 1 2 1" />
    </filter>
    <filter id="wavy">
        <feTurbulence type="fractalNoise" baseFrequency="0.03" numOctaves="2"
            result="turbulence_3" data-filterId="3" />
        <feDisplacementMap xChannelSelector="R" yChannelSelector="G"
            in="SourceGraphic" in2="turbulence_3" scale="40" />
    </filter>    
  </defs>
  <rect x="150" width="90" height="90" stroke="green" stroke-width="3"
    fill="yellow" filter="url(#dropShadow3)" />    
  <rect x="250" width="90" height="90" stroke="green" stroke-width="3"
    fill="yellow" filter="url(#sepia)" />    
</svg> </div>
  <button id="btn1">Start animation</button>
<svg 
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:wow="http://example.org/wow"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    unselectable="on" 
    style="-webkit-user-select: none;"
    id="svg"
	tabindex='1'
    >

 <defs>
    <pattern id="checkerPattern" width="80" height="80"
      patternUnits="userSpaceOnUse">

      <rect fill="red" fill-opacity="0.2" x="0" y="0" width="40" height="40" />
      <rect fill="blue" fill-opacity="0.2" fill="blue" x="40" y="0" width="40" height="40" />
      <rect fill="blue" fill-opacity="0.2" x="0" y="40" width="40" height="40" />
      <rect fill="red" fill-opacity="0.2" x="40" y="40" width="40" height="40" />


    </pattern>
  </defs>

  <g transform="translate(50,50)">
    <rect fill="url(#checkerPattern)" x="0"
      y="0" width="400" height="400" />
  </g>


<wow:grid cols="3" rows="3" valign="center" halign="center" uniformColumns="false" uniformRows="true">
    <wow:piechart name="foo" title="Sales by Region">
      <wow:pieslice label="Northern Region" value="1.23" color="blue"/>
      <wow:pieslice label="Eastern Region" value="2.53" color="red"/>
      <wow:pieslice label="Southern Region" value="3.89" color="green"/>
      <wow:pieslice label="Western Region" value="2.04" color="yellow"/>
    </wow:piechart>
<wow:textbox maxchars=30>Hello, SVG!</wow:textbox>

    <wow:piechart name="bar" title="Sales by Region">
      <wow:pieslice label="Python" value="1.23" color="blue"/>
      <wow:pieslice label="Java" value="2.53" color="red"/>
      <wow:pieslice label="C++" value="2" color="green"/>
    </wow:piechart>
	<wow:box width=300 height=60 fill="red"></wow:box>
<wow:flow direction="right" anchor="top">
	<wow:box width=200 height=200 fill="orange">

<rect x="20" y="20" width="60" height="60" fill="blue">
  <animateTransform attributeType="xml"
                    attributeName="transform"
                    type="rotate"
                    from="0 50 50"
                    to="360 50 50"
                    dur="4s"
                    repeatCount="indefinite"/>
</rect>  

	</wow:box>
	<wow:box width=150 height=140 fill="cyan"></wow:box>
</wow:flow>

<wow:text width="100" height="100" class="mytext">
Multiline text that needs wrapping
</wow:text>

<wow:viewport width="200" height="100">
	<wow:box width=30 height=30 fill="cyan"></wow:box>
</wow:viewport>

<wow:viewport width="200" height="100" preserveAspectRatio="none">
<rect x="20" y="20" width="60" height="60" fill="blue"></rect>
<rect x="40" y="40" width="60" height="60" fill="red"></rect>
</wow:viewport>
	
	<wow:image src="./icons/SVG/stackoverflow.svg" class="fubar" name="foooo" embed="true"/>
	
	</wow:grid>




<g id="tempgroup" style="display:none;"></g>


<!-- alas, transform attribute does not work well with foreignObject forms -->
<!-- as well as wrapping it into svg element... -->
<g>
    <foreignObject x="350" y="50" width="200" height="150">
        <body xmlns="http://www.w3.org/1999/xhtml">
            <form>
                <input id="inner1" type="text"/>
                <input id="inner2" type="text"/>
            </form>
        </body>
    </foreignObject>
    <circle cx="360" cy="80" r="30" fill="#00ff00" fill-opacity="0.5"/>
</g>



</svg>

</body>
</html>
