var Storage = require("../Storage")
var SchemedDAO = require("./SchemedDAO")

var defaults = {
	// default manifest
	"apptype": "basic", 
	"description": "",
	"author": "",
	"version": "",
	"uri": "",
	"autogenerated": true
}

var schema = {
	"type":"object",
	"$schema": "http://json-schema.org/draft-03/schema",
	"id": "http://jsonschema.net",
	"required":false,
	"properties":{
		"ownerAdminId": {
			"type":"number",
			"required":true
		},
		"created": {
			"type":"string",
			"required":false
		},
		"title": {
			"type":"string",
			"required":true
		},
		"description": {
			"type":"string",
			"required":false
		},
		"apptype": {
			"type":"string",
			"required":true
		},
		"author": {
			"type":"string",
			"required":false
		},
		"version": {
			"type":"string",
			"required":false
		},
		"uri": {
			"type":"string",
			"required":false
		},
		"autogenerated": {
			"type":"boolean",
			"required":false
		}
	}
}

var ImportDAO = SchemedDAO.extend({
	constructor: function() {
		this.base(Storage.collection("imports"), schema, defaults)
	}
})

module.exports = ImportDAO

